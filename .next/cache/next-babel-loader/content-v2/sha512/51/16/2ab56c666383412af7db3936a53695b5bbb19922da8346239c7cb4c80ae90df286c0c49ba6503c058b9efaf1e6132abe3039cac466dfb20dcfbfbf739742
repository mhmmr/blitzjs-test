{"ast":null,"code":"import _extends from \"D:/Software Dev/blitz-test/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"D:/Software Dev/blitz-test/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"D:/Software Dev/blitz-test/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Software Dev/blitz-test/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectWithoutProperties from \"D:/Software Dev/blitz-test/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nexport var FORM_ERROR = \"FORM_ERROR\";\nexport function Form(_ref) {\n  var children = _ref.children,\n      submitText = _ref.submitText,\n      schema = _ref.schema,\n      initialValues = _ref.initialValues,\n      onSubmit = _ref.onSubmit,\n      props = _objectWithoutProperties(_ref, [\"children\", \"submitText\", \"schema\", \"initialValues\", \"onSubmit\"]);\n\n  var ctx = useForm({\n    mode: \"onBlur\",\n    resolver: function () {\n      var _resolver = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var _error$formErrors;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n\n                if (schema) {\n                  schema.parse(values);\n                }\n\n                return _context.abrupt(\"return\", {\n                  values: values,\n                  errors: {}\n                });\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                return _context.abrupt(\"return\", {\n                  values: {},\n                  errors: (_error$formErrors = _context.t0.formErrors) === null || _error$formErrors === void 0 ? void 0 : _error$formErrors.fieldErrors\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }));\n\n      function resolver(_x) {\n        return _resolver.apply(this, arguments);\n      }\n\n      return resolver;\n    }(),\n    defaultValues: initialValues\n  });\n\n  var _useState = useState(null),\n      formError = _useState[0],\n      setFormError = _useState[1];\n\n  return __jsx(FormProvider, ctx, __jsx(\"form\", _extends({\n    onSubmit: ctx.handleSubmit( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n        var result, _i, _Object$entries, _Object$entries$_i, key, value;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return onSubmit(values);\n\n              case 2:\n                _context2.t0 = _context2.sent;\n\n                if (_context2.t0) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.t0 = {};\n\n              case 5:\n                result = _context2.t0;\n\n                for (_i = 0, _Object$entries = Object.entries(result); _i < _Object$entries.length; _i++) {\n                  _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2), key = _Object$entries$_i[0], value = _Object$entries$_i[1];\n\n                  if (key === FORM_ERROR) {\n                    setFormError(value);\n                  } else {\n                    ctx.setError(key, {\n                      type: \"submit\",\n                      message: value\n                    });\n                  }\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }())\n  }, props, {\n    className: \"jsx-50508738\" + \" \" + (props && props.className != null && props.className || \"form\")\n  }), children, formError && __jsx(\"div\", {\n    role: \"alert\",\n    style: {\n      color: \"red\"\n    },\n    className: \"jsx-50508738\"\n  }, formError), submitText && __jsx(\"button\", {\n    type: \"submit\",\n    disabled: ctx.formState.isSubmitting,\n    className: \"jsx-50508738\"\n  }, submitText), __jsx(_JSXStyle, {\n    id: \"50508738\"\n  }, [\".form>*+*{margin-top:1rem;}\"])));\n}\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}