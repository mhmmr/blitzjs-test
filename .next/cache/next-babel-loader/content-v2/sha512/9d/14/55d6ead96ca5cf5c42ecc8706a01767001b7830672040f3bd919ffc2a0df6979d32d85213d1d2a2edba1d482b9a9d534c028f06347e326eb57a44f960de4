{"ast":null,"code":"import { withBlitzAppRoot as _withBlitzAppRoot } from \"@blitzjs/core\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { ErrorComponent, useRouter, AuthenticationError, AuthorizationError } from \"blitz\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { queryCache } from \"react-query\";\nimport LoginForm from \"app/auth/components/LoginForm\";\nimport \"app/styles/global.css\";\n\nfunction App(_ref2) {\n  var Component = _ref2.Component,\n      pageProps = _ref2.pageProps;\n\n  var getLayout = Component.getLayout || function (page) {\n    return page;\n  };\n\n  var router = useRouter();\n  return __jsx(ErrorBoundary, {\n    FallbackComponent: RootErrorFallback,\n    resetKeys: [router.asPath],\n    onReset: function onReset() {\n      // This ensures the Blitz useQuery hooks will automatically refetch\n      // data any time you reset the error boundary\n      queryCache.resetErrorBoundaries();\n    }\n  }, getLayout(__jsx(Component, pageProps)));\n}\n\nexport default _withBlitzAppRoot(App);\n\nfunction RootErrorFallback(_ref) {\n  var error = _ref.error,\n      resetErrorBoundary = _ref.resetErrorBoundary;\n\n  if (error instanceof AuthenticationError) {\n    return __jsx(LoginForm, {\n      onSuccess: resetErrorBoundary\n    });\n  } else if (error instanceof AuthorizationError) {\n    return __jsx(ErrorComponent, {\n      statusCode: error.statusCode,\n      title: \"Sorry, you are not authorized to access this\"\n    });\n  } else {\n    return __jsx(ErrorComponent, {\n      statusCode: error.statusCode || 400,\n      title: error.message || error.name\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}